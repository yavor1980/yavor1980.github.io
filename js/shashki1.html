<!DOCTYPE html>
<html>
<body>
<style>
*{position}
#cont
{position:relative;
 width: 400px;
 height: 400px;
 background;
 border:2px solid black;
 left:22%;
 top:22%;
}
.cl
{
 position: absolute;
 width: 50px;
 height: 50px;
 border:2px solid black;
 background:grey;
}

.f
{
 position: absolute;
 width: 50px;
 height: 50px;
 background:black;
 border-radius:50%;
 content;
}
</style>

<div id=cont onmousedown onmousemove
  onmouseup>
</div>

<p id=idp>0</p>

<script>//
  cont=document.getElementById("cont")
   p=document.getElementById("idp")
  // p.style.background
  cl=[];
  //1,1,1,1,1,1,1,1
  v=[];
  v[0]=[2,0,2,0,2,0,2,0];
  v[1]=[0,2,0,2,0,2,0,2];
  v[2]=[2,0,2,0,2,0,2,0];
  v[3]=[0,0,0,0,0,0,0,0];
  v[4]=[0,0,0,0,0,0,0,0];
  v[5]=[0,1,0,1,0,1,0,1];
  v[6]=[1,0,1,0,1,0,1,0];
  v[7]=[0,1,0,1,0,1,0,1];
  
  for(j=0;j<8;j++)
  {
  for(i=0;i<8;i++)
  { cl[i]=document.createElement("div")
   
    cl[i].className='cl'; 
     cl[i].style.left=50*i+'px'
     cl[i].style.top=50*j+'px'
   if((j%2==0)&&(i%2==0))	
    	cl[i].style.background='white'
   if((j%2==1)&&(i%2==1))	
    	cl[i].style.background='white'	
      cont.appendChild(cl[i]);
  };
  }
  
  
//======================================================= o
o=
  {
   a:[], bst:0,
   
   set:function()
   { j=7
    for(i=0;i<12;i++)    
    {    if((i>0)&&(i%4==0))j--;  
     o.a[i]=
     {el:document.createElement("div"),
       x:i%4*2,y:j,b:0,dx:0,dy:0,d:0,
       
	   set:function()
       {if(j%2==1){this.x+=1;}
        this.el.className='f';  
		this.el.style.background='#999';
		this.el.style.border='1px solid black';
        this.el.style.left=this.x*50+'px'
        this.el.style.top=this.y*50+'px'  
         cont.appendChild(this.el);
       },  
    
       chs:function()
       { 
	    
	     //if((o.a[i].x!=this.x-1)&&(o.a[i].y!=this.y-1)) 
		   // this.d=0;
	 
	   /**/
	     //this.d=Math.round(Math.random()*4);
		  if((this.x>7)&&(this.d==1))this.d=3;
		 if((this.x>7)&&(this.d==2))this.d=0;
		  if((this.x<1)&&(this.d==0))this.d=1;
		 if((this.x<1)&&(this.d==3))this.d=2;
		  if((this.y>7)&&(this.d==2))this.d=0;
		 if((this.y>7)&&(this.d==3))this.d=2;
		  if((this.x<1)&&(this.d==0))this.d=2;
		 if((this.x<1)&&(this.d==1))this.d=2;
		 
    	switch(this.d)
	     { 
		  case 0: if(v[this.y-1][this.x-1]!=0) //this.d+=1;
               this.chs();		  
		          break;
		  case 1: if(v[this.y-1][this.x+1]!=0) //this.d+=1;	
               	this.chs();	  
		          break;
          case 2: if(v[this.y+1][this.x+1]!=0) //this.d+=1;
		       this.chs();
		          break;
          case 3: if(v[this.y+1][this.x-1]!=0) //this.d+=1;
		       this.chs();
		          break;		
		}
	    switch(this.d)
	     { 
		  case 0: this.dx=this.x-1;		          
		           this.dy=this.y-1;
		          break;
		  case 1: this.dx=this.x+1;
		           this.dy=this.y-1;
		          break;
          case 2: this.dx=this.x+1;
		           this.dy=this.y+1;
		          break;
          case 3: this.dx=this.x-1;
		           this.dy=this.y+1;
		          break;	
          				  
		  		  
		 }	
      v[this.dy][this.dx]=1
      v[this.y][this.x]=0
	  
 if((v[this.y+1][this.x+1]==1)&&(v[this.y+2][this.x+2]==0))
  {dx=this.x+2; dy=this.x+2; } 
 if((v[this.y-1][this.x-1]==1)&&(v[this.y-2][this.x-2]==0))
  {dx=this.x-2; dy=this.x-2; } 
if((v[this.y-1][this.x+1]==1)&&(v[this.y-2][this.x+2]==0))
  {dx=this.x-2; dy=this.x+2; } 
if((v[this.y+1][this.x-1]==1)&&(v[this.y+2][this.x-2]==0))
  {dx=this.x+2; dy=this.x-2; }   
		
		this.el.style.left=this.dx*50+'px';
         this.el.style.top=this.dy*50+'px';  
		 this.x= this.dx;		 
		 this.y=this.dy;
		
       },  
       
      
      }
     o.a[i].set();  
     } 
    },
	
    chs:function()
    {if(!o.bst)
	 { 
	  i=Math.round(Math.random()*11)
	 
	 //for(i=0;i<12;i++)	  
	    o.a[i].chs(); o.bst=1;  
	 }     
      
    },
	
   
  }
    o.set()	
	
	
//================================================== OO	
 oo=
  {
   a:[], 
   
   set:function()
   { j=0
    for(i=0;i<12;i++)    
    {    if((i>0)&&(i%4==0))j++;  
     oo.a[i]=
     {el:document.createElement("div"),
       x:i%4*2,y:j,b:0,dx:0,dy:0,d:1,
       
	   set:function()
       {if(j%2==1){this.x+=1;}
        this.el.className='f';  
		this.el.style.background='#000';
		this.el.style.border='1px solid black';
        this.el.style.left=this.x*50+'px'
        this.el.style.top=this.y*50+'px'  
         cont.appendChild(this.el);
       },  
    
       chs:function(i)
       { 
	   /*
	     if((v[this.x-1]==0)&&(o.a[i].y!=this.y-1)) 
		    this.d=0;
	     if((v[this.x-1]==0)&&(o.a[i].y!=this.y-1)) 
		    this.d=1;
		 if((v[this.x-1]==0)&&(o.a[i].y!=this.y-1)) 
		    this.d=2;
		 if((v[this.x-1]==0)&&(o.a[i].y!=this.y-1)) 
		    this.d=3;
	   */
	     //this.d=Math.round(Math.random()*4);
		 if((this.x>6)&&(this.d==1))this.d=3;
		 if((this.x>6)&&(this.d==2))this.d=0;
		  if((this.x<1)&&(this.d==0))this.d=1;
		 if((this.x<1)&&(this.d==3))this.d=2;
		  if((this.y>6)&&(this.d==2))this.d=0;
		 if((this.y>6)&&(this.d==3))this.d=2;
		  if((this.x<1)&&(this.d==0))this.d=2;
		 if((this.x<1)&&(this.d==1))this.d=2;
		/*
		 switch(this.d)
	     { 
		  case 0: if(v[this.y-1][this.x-1]!=0) //this.d+=1;
               this.chs();		  
		          break;
		  case 1: if(v[this.y-1][this.x+1]!=0) //this.d+=1;	
               	this.chs();	  
		          break;
          case 2: if(v[this.y+1][this.x+1]!=0) //this.d+=1;
		       this.chs();
		          break;
          case 3: if(v[this.y+1][this.x-1]!=0) //this.d+=1;
		       this.chs();
		          break;		
		}   */
	    switch(this.d)
	     { 
		  case 0:  this.dx=this.x-1;
		           this.dy=this.y+1;
		          break;
		  case 1:  this.dx=this.x+1;
		           this.dy=this.y+1;
		          break;
          case 2:  this.dx=this.x+1;
		           this.dy=this.y-1;
		          break;
          case 3:  this.dx=this.x-1;
		           this.dy=this.y-1;
		          break;				  
		  		  
		 }
   v[this.dy][this.dx]=2
   v[this.y][this.x]=0

		 
		 this.el.style.left=this.dx*50+'px';
         this.el.style.top=this.dy*50+'px';  
		 this.x= this.dx;		 
		 this.y=this.dy;
	/*	
		p.innerHTML=
  	     v[0]+'<br>'+v[1]+'<br>'+v[2]+'<br>'+v[3]+'<br>'+
         v[4]+'<br>'+v[5]+'<br>'+v[6]+'<br>'+v[7];*/
       },
	   
            
      }
     oo.a[i].set();  
     } 
    },
	
    chs:function()
    {if(!oo.bst)
	 { 
	  i=Math.round(Math.random()*11)
	 
	 //for(i=0;i<12;i++)	  
	    oo.a[i].chs(); o.bst=0;  
	 }     
      
    },
	
   
  }
    oo.set()	
	
  function fcl(n)
  {  
    if(!o.bst)	o.chs(); else oo.chs();	
  
  }	
 
 //fcl()
  setInterval(()=>fcl(),999)
  
  
    
   
  
</script>
</body>
</html>
